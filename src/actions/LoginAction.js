// import axios from 'axios';
import { LoginType, ErrorType } from './ActionType';
import { UsersUrl } from './ActionURL';
// import { Configs } from './ActionConfigs';
// import setAuthorizationToken from '../utils/setAuthorizationToken';
// import AppConfig from '../config';
import {
  // API_GET,
  API_POST
  // API_PUT
  // API_PUT
} from './APIMethods';

// login form submitted
export const submitLogin = (data, callBack) => {
  const url = `${UsersUrl.SUBMIT_LOGIN}`;
  return async dispatch => {
    try {
      const result = await API_POST(url, data);
      if (!result.error) {
        sessionStorage.setItem('userdata', JSON.stringify(result.data));
        dispatch({ type: LoginType.LOGIN_SUCCESSFUL, payload: result.data });
      } else {
        callBack(result);
      }
      return result;
    } catch (error) {
      dispatch({ type: ErrorType.ERROR_LOG, message: error.message });
      return { error: true, networkError: true };
    }
  };
};
