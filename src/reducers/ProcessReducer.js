import { Processes } from '../actions/ActionType';

const initialState = {
  processData: [],
  processes: [],
  subProcesses: {}
};

const seperateSubProcesses = processes => {
  const subProcesses = {};
  processes.forEach(process => {
    subProcesses[process.id] = process.subProcesses;
  });
  return subProcesses;
};

export default function reducer(state = initialState, action) {
  switch (action.type) {
    case Processes.FETCH_PROCESS_DATA: {
      return { ...state, processData: action.processData };
    }
    case Processes.ERROR_LOG: {
      return {
        ...state,
        message: 'Error.'
      };
    }
    case Processes.FETCH_ALL_PROCESSES: {
      return {
        ...state,
        processes: action.businessProcesses,
        subProcesses: seperateSubProcesses(action.businessProcesses)
      };
    }

    default: {
      return state;
    }
  }
}
