import React, { Component } from 'react';
import { connect } from 'react-redux';
import DashboardToggleView from '../Dashboard/dashboardToggleView';
import AnnouncementFormsView from './AnnouncementFormsView';
import { fetchAnimals } from '../../actions/animalActions';

class Announcements extends Component {
  componentDidMount() {
    this.props.dispatch(fetchAnimals());
  }
  render() {
    const { currentView, animalSpecies, attributes } = this.props;
    const tileView = currentView === 'tileView';
    const tableView = currentView === 'tableView';
    return (
      <div className="position-search-wrap">
        <div className="browse-wrap">
          <DashboardToggleView />
          <div className="grid-view">
            {tileView ? (
              <AnnouncementFormsView
                animalSpecies={animalSpecies}
                attributes={attributes}
              />
            ) : (
              ''
            )}
            {tableView ? <div>data is displayed here</div> : ''}
          </div>
        </div>
      </div>
    );
  }
}

const mapStateToProps = state => ({
  currentView: state.dashboard.currentView,
  animalSpecies: state.animalsReducer.animalSpecies,
  attributes: state.attributesReducer.attributes
});

export default connect(mapStateToProps)(Announcements);
