import React, { Component } from 'react';
import { Row, Col, Button } from 'react-bootstrap';
// import { keyBy, map, merge } from 'lodash';
// import Titles from '../../data/DashboardTitles.json';
// import ViewContentTitleModal from '../Dashboard/viewContentTileModal';
// import MyDrawer from '../../components/Drawer/Drawer';
import { LargeModal } from '../../components/Modals';
import { months } from '../../data/reusableConstants';
// import { Button } from '@material-ui/core';
// import Pagination from '../../components/Pagination/Pagination';

class AnnouncementGridView extends Component {
  constructor() {
    super();
    this.state = {
      // right: false,
      show: false,
      loopIndex: ''
    };
    // this.openDrawer = this.openDrawer.bind(this);
    // this.getDrawer = this.getDrawer.bind(this);
    this.getLargeModal = this.getLargeModal.bind(this);
    this.handleShow = this.handleShow.bind(this);
    this.handleClose = this.handleClose.bind(this);
    // this.closeDrawer = this.closeDrawer.bind(this);
  }

  // getDrawer(d, i) {
  //   if (this.state.loopIndex === i) {
  //     return (
  //       <MyDrawer
  //         anchor="right"
  //         open={this.state.right}
  //         onClose={() => this.closeDrawer('right', false)}
  //       >
  //         <ViewContentTitleModal data={d} />
  //       </MyDrawer>
  //     );
  //   }
  //   return null;
  // }
  onSlideChange = number => this.props.handlePaginationChange(number);

  getLargeModal(d, i) {
    if (this.state.loopIndex === i) {
      return (
        <LargeModal
          show={this.state.show}
          onHide={this.handleClose}
          header="Contact Details"
          actionbuttontemplate={d.template}
          actionbuttonselection={[d]}
        >
          <div>a much detailed view on each announcement</div>
          {/* <ViewContentTitleModal data={d} /> */}
        </LargeModal>
      );
    }
    return null;
  }

  // openDrawer(side, open, index) {
  //   this.setState({
  //     [side]: open,
  //     loopIndex: index
  //   });
  // }
  // closeDrawer(side, close) {
  //   this.setState({
  //     [side]: close
  //   });
  // }
  getReadableDate = isoformat => {
    const readable = new Date(isoformat);
    const m = readable.getMonth(); // returns 6
    const d = readable.getDay(); // returns 15
    const y = readable.getFullYear(); // returns 2012
    const mlong = months[m];
    const fulldate = `${mlong} ${d}, ${y}`;
    return fulldate;
  };
  handleShow(i) {
    this.setState({ show: true, loopIndex: i });
  }
  handleClose() {
    this.setState({ show: false });
  }

  generateGridView = announcements =>
    // const lookup = keyBy(processes, 'id');
    // const dataPopulated = map(data, x =>
    //   merge(x, { process: lookup[x.process] })
    // );
    announcements.map((anncmnt, i) => (
      <div key={i}>
        <Row className="border-bottom padding-vertical" key={i}>
          {/* <Col lg={2} md={2}>
            <div className="gridview-profile-pic text-center">
              <img
                className="sidebar-logo-image avatar"
                src={d.process.logo}
                alt="Go to index"
              />
            </div>
          </Col> */}
          <Col lg={10} md={10} sm={12}>
            <Row>
              <Col lg={6} md={6} sm={6} className="np-left process-subprocess">
                <h1>
                  <span>{anncmnt.name}</span>
                </h1>{' '}
                -{' '}
                {/* <h2>
                  <span>anml names</span>
                </h2> */}
              </Col>
              <Col lg={6} md={6} sm={6} className="np-left text-right">
                <h3 title="Country, Region" style={{ margin: '0px' }}>
                  {/* <div className="country-flag">
                    <span
                      className={`flag-icon flag-icon-${d.alpha2Code.toLowerCase()}`}
                    />
                  </div> */}
                  {/* <i className="fas fa-map-marker-alt gray" /> */}
                  &nbsp; Status - <span>{anncmnt.status}</span>
                </h3>
              </Col>
            </Row>
            <div>
              <div>
                <h3>
                  <span>
                    Total Animal Species:{' '}
                    <span className="green-text">{anncmnt.animals.length}</span>
                  </span>
                </h3>
                <hr />
              </div>
              <Row>
                <Col lg={3} md={3} sm={12} className="no-padding">
                  <div>
                    <h3>
                      <span style={{ fontSize: '14px' }}>Animals:</span>
                    </h3>
                    {anncmnt.animals.map(anml => (
                      <h5
                        style={{
                          color: 'green',
                          fontSize: '13px',
                          lineHeight: '20px'
                        }}
                      >
                        Specie Name: {anml.specie.name} - Quantity:{' '}
                        {anml.quantity}
                      </h5>
                    ))}
                    <h3>
                      <span style={{ fontSize: '14px' }}>Attributes:</span>
                    </h3>
                    {anncmnt.attributes.map(attr => (
                      <h5
                        style={{
                          color: 'green',
                          fontSize: '13px',
                          lineHeight: '20px'
                        }}
                      >
                        Attribute Name: {attr.attribute.name} || Min: {attr.min}{' '}
                        Max: {attr.max}
                      </h5>
                    ))}
                  </div>
                </Col>
                <Col lg={12} md={12} sm={12} className="no-padding">
                  <div>
                    <Row className="cardFooter-labels">
                      <Col lg={3} md={3} sm={3} className="np-left">
                        <h3>Created Date:</h3>
                        <h5>{this.getReadableDate(anncmnt.createdDate)}</h5>
                      </Col>
                      {/* <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.primaryContact}>Primary Contact:</h3>
                        <h5>{d.primaryContact}</h5>
                      </Col>
                      <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.seniorProcessManager}>
                          Sr. Process Manager:
                        </h3>
                        <h5>{d.seniorProcessManager}</h5>
                      </Col>
                      <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.workingWeek}>Working Week: </h3>
                        <h5>{d.workingWeek}</h5>
                      </Col>
                      <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.serviceHours}>Service Hours: </h3>
                        <h5>
                          {d.localServiceHoursStart} - {d.localServiceHoursEnd}
                        </h5>
                      </Col> */}
                    </Row>
                    <Row className="cardFooter-labels">
                      {/* <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.email}>Email:</h3>
                        <a href={`mailto:${d.email}`}>
                          <h5>{d.email}</h5>
                        </a>
                      </Col>
                      <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.phoneNumber}>Phone Number:</h3>
                        <a href={`tel:${d.phoneNumber}`}>
                          <h5>{d.phoneNumber}</h5>
                        </a>
                      </Col>
                      <Col lg={3} md={3} sm={3} className="np-left">
                        <h3 title={Titles.fastDial1}>Fast Dial 1:</h3>
                        <a href={`tel:${d.fastDial1}`}>
                          <h5>{d.fastDial1}</h5>
                        </a>
                      </Col> */}

                      <Col lg={3} md={3} sm={3} className="np-left text-right">
                        <Button
                          className="btn btn-success full-width"
                          bsSize="small"
                          // onClick={() => this.openDrawer('right', true, i)}
                          onClick={() => this.handleShow(i)}
                        >
                          More <i className="fas fa-angle-double-right" />
                        </Button>
                      </Col>
                    </Row>
                  </div>
                </Col>
              </Row>
            </div>
          </Col>
        </Row>
        {/* <div>{this.getDrawer(d, i)}</div> */}
        {this.getLargeModal(anncmnt, i)}
      </div>
    ));

  render() {
    // const props = { ...this.props };
    const { announcements } = this.props;
    // const sliceFrom = (props.activePage - 1) * 8;
    // const displayData = props.processData.slice(sliceFrom, sliceFrom + 8);
    return (
      <div className={`search-result-wrap ${false ? 'active' : ''}`}>
        {this.generateGridView(announcements)}
        {/* <div className="top-pagination">
          <Pagination
            activePage={props.activePage}
            totalPages={props.processData.length}
            onChange={this.onSlideChange}
          />
        </div> */}
      </div>
    );
  }
}

export default AnnouncementGridView;
